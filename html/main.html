<div class="oror">
    <div class="r">
        <div class="title">загадайте слово</div>
        <div class="wordRow" id="finishWord" data-length="5"></div>
        <div class="button calm disabled" id="getLink">получить ссылку</div>
        <a id="link"></a>
        <div class="message error" id="wordNotExist">слово не существует</div>
        <script>
            $("#finishWord").on("keydown", "input", (e) => {
                if (ru.indexOf(e.key) == -1) return;
                setTimeout(() => {
                    if (getWordByWordRow($("#finishWord")[0]).length == $("#finishWord")[0].dataset.length - 0) {
                        $("#getLink").removeClass("disabled");
                    }
                }, 100);
            });
            $("#getLink").on("click", async function () {
                if (this.classList.has("disabled")) return;
                const word = getWordByWordRow($("#finishWord")[0]).toLowerCase();
                if (!(await wordIsNotExist(word))) {
                    $("#wordNotExist").addClass("go");
                    setTimeout(() => $("#wordNotExist").removeClass("go"), 5000);
                } else {
                    var text = decodeURIComponent(btoa([...word].map((e) => ru.indexOf(e) + "").join(",")));
                    $("#link").attr("href", `http://svan9.github.io/matchword/?word=${text}`).html(text);
                }
            });
        </script>
    </div>
    <div class="m">или</div>
    <div class="l">
        <div class="title">играйте по ссылке</div>
        <input id="input_link" type="text" />
        <div class="message error" id="wordNotExist">слово не существует</div>
        <div class="button calm disabled" id="sendLink">найти ссылку</div>
        <script>
            $("#input_link").on("input", function (e) {
                const regex = /https?:\/\/(.*\/?)+\/\?word\=.+/gm;
                // if () {
                //     // this.value = new URLSearchParams(new URL(this.value.trim()).search).get("word");
                // }
                if (this.value.trim() == "") {
                    $("#sendLink").addClass("disabled");
                } else if (regex.test(this.value.trim())) {
                    $("#sendLink").removeClass("disabled");
                }
            });
            $("#sendLink").on("click", function (e) {
                if (this.classList.has("disabled")) return;
                window.history.pushState({}, "", $("#input_link").val());
                window.location.reload();
            });
        </script>
    </div>
</div>
